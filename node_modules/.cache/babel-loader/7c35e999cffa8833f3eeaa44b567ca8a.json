{"ast":null,"code":"var _jsxFileName = \"/Users/carolaine.viana/Documents/react-leaflet-tutorial/src/Components/MyMap.js\";\nimport React, { Component, useEffect, useState } from \"react\";\nimport { Map, TileLayer, Popup, Marker } from \"react-leaflet\";\nimport localizador from \"../assets/marcador.png\";\nimport semaforo from \"../assets/semaforo.png\";\nimport L from \"leaflet\";\nimport axios from \"axios\";\nimport Acidentes from \"../Pages/Acidentes\";\nimport Controlers from \"../Pages/Controlers\";\nimport Header from \"./Header\";\nimport { handleIncident } from \"../requests/user\";\n\nfunction MyMap(props) {\n  const [center, setCenter] = useState({\n    lat: -20.30297,\n    lng: -40.303538\n  });\n  const [data, setData] = useState([]); // const [controlers, setControlers] = useState([]);\n  // const [incidents, setIncidents] = useState([])\n\n  const [teste, setTeste] = useState(); // const handleIncident = async () => {\n  //   axios\n  //     .get(\"https://dev.atmansystems.com/attlas-public/api/Incidents\")\n  //     .then((res) => {\n  //       // alert(\"ok\");\n  //       setData(res.data);\n  //     })\n  //     .catch((error) => {\n  //       alert(\"deu erro\");\n  //       console.log(error.response);\n  //     });\n  // };\n\n  const handleControlers = async () => {\n    axios.get(\"https://dev.atmansystems.com/attlas-public/api/Controllers\").then(res => {\n      alert(\"ok\");\n      setControlers(res.data);\n    }).catch(error => {\n      alert(\"deu erro\");\n      console.log(error.response);\n    });\n  };\n\n  useEffect(() => {\n    handleIncident(setData);\n    handleControlers(setControlers);\n  }, []);\n  console.log(\"DADOS\", data);\n  const marcador = L.icon({\n    iconUrl: localizador,\n    // shadowUrl: leafShadow,\n    iconSize: [50, 50],\n    // size of the icon\n    shadowSize: [50, 64],\n    // size of the shadow\n    iconAnchor: [22, 94],\n    // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62],\n    // the same for the shadow\n    popupAnchor: [-3, -76]\n  });\n  const controladores = L.icon({\n    iconUrl: semaforo,\n    // shadowUrl: leafShadow,\n    iconSize: [50, 50],\n    // size of the icon\n    shadowSize: [50, 64],\n    // size of the shadow\n    iconAnchor: [22, 94],\n    // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62],\n    // the same for the shadow\n    popupAnchor: [-3, -76]\n  }); //   const teste = {lat: data[0].latitude, lng: data[0].longitude}\n  // const clicou = (event) => {\n  //   // setTeste(event.target.value.name);\n  //   console.log(event.value)\n  //   // console.log(teste);\n  // }\n  // console.log(teste)\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Acidentes, {\n    incidents: incidents,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Controlers, {\n    teste: teste,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Map, {\n    className: \"map\",\n    center: center,\n    zoom: 100 // style={{ height: 500, width: \"100%\" }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, data.length > 0 && data.map(p => {\n    const positionMark = {\n      lat: p.latitude,\n      lng: p.longitude\n    };\n\n    const DatasIncidents = () => {\n      setIncidents(p);\n    };\n\n    return /*#__PURE__*/React.createElement(Marker, {\n      position: positionMark,\n      icon: marcador,\n      onclick: DatasIncidents,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, \"INCIDIDENTES\"), /*#__PURE__*/React.createElement(Popup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, \"ID: \", p.id));\n  }), controlers.length > 0 && controlers.map(p => {\n    const positionMark = {\n      lat: p.latitude,\n      lng: p.longitude\n    };\n\n    const clicou = () => {\n      setTeste(p); // console.log('oi')\n      // console.log(teste)\n    };\n\n    return /*#__PURE__*/React.createElement(Marker, {\n      position: positionMark,\n      icon: controladores,\n      onClick: clicou,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, \"CONTROLADORES\"), /*#__PURE__*/React.createElement(Popup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, \"ID: \", p.id));\n  }), /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default MyMap;","map":{"version":3,"sources":["/Users/carolaine.viana/Documents/react-leaflet-tutorial/src/Components/MyMap.js"],"names":["React","Component","useEffect","useState","Map","TileLayer","Popup","Marker","localizador","semaforo","L","axios","Acidentes","Controlers","Header","handleIncident","MyMap","props","center","setCenter","lat","lng","data","setData","teste","setTeste","handleControlers","get","then","res","alert","setControlers","catch","error","console","log","response","marcador","icon","iconUrl","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","controladores","incidents","length","map","p","positionMark","latitude","longitude","DatasIncidents","setIncidents","id","controlers","clicou"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAsD,OAAtD;AACA,SAASC,GAAT,EAAcC,SAAd,EAAyBC,KAAzB,EAAgCC,MAAhC,QAA8C,eAA9C;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,CAAP,MAAc,SAAd;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,cAAT,QAA+B,kBAA/B;;AAGA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC;AAAEiB,IAAAA,GAAG,EAAE,CAAC,QAAR;AAAkBC,IAAAA,GAAG,EAAE,CAAC;AAAxB,GAAD,CAApC;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpB,QAAQ,CAAC,EAAD,CAAhC,CAFoB,CAGpB;AACA;;AACA,QAAM,CAACqB,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,EAAlC,CALoB,CAOpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMuB,gBAAgB,GAAG,YAAY;AACnCf,IAAAA,KAAK,CACFgB,GADH,CACO,4DADP,EAEGC,IAFH,CAESC,GAAD,IAAS;AACbC,MAAAA,KAAK,CAAC,IAAD,CAAL;AACAC,MAAAA,aAAa,CAACF,GAAG,CAACP,IAAL,CAAb;AACD,KALH,EAMGU,KANH,CAMUC,KAAD,IAAW;AAChBH,MAAAA,KAAK,CAAC,UAAD,CAAL;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,QAAlB;AACD,KATH;AAUD,GAXD;;AAaAlC,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,cAAc,CAACQ,OAAD,CAAd;AACAG,IAAAA,gBAAgB,CAACK,aAAD,CAAhB;AACD,GAHQ,EAGN,EAHM,CAAT;AAKAG,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBb,IAArB;AAEA,QAAMe,QAAQ,GAAG3B,CAAC,CAAC4B,IAAF,CAAO;AACtBC,IAAAA,OAAO,EAAE/B,WADa;AAEtB;AACAgC,IAAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CAHY;AAGF;AACpBC,IAAAA,UAAU,EAAE,CAAC,EAAD,EAAK,EAAL,CAJU;AAIA;AACtBC,IAAAA,UAAU,EAAE,CAAC,EAAD,EAAK,EAAL,CALU;AAKA;AACtBC,IAAAA,YAAY,EAAE,CAAC,CAAD,EAAI,EAAJ,CANQ;AAMC;AACvBC,IAAAA,WAAW,EAAE,CAAC,CAAC,CAAF,EAAK,CAAC,EAAN;AAPS,GAAP,CAAjB;AAUA,QAAMC,aAAa,GAAGnC,CAAC,CAAC4B,IAAF,CAAO;AAC3BC,IAAAA,OAAO,EAAE9B,QADkB;AAE3B;AACA+B,IAAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CAHiB;AAGP;AACpBC,IAAAA,UAAU,EAAE,CAAC,EAAD,EAAK,EAAL,CAJe;AAIL;AACtBC,IAAAA,UAAU,EAAE,CAAC,EAAD,EAAK,EAAL,CALe;AAKL;AACtBC,IAAAA,YAAY,EAAE,CAAC,CAAD,EAAI,EAAJ,CANa;AAMJ;AACvBC,IAAAA,WAAW,EAAE,CAAC,CAAC,CAAF,EAAK,CAAC,EAAN;AAPc,GAAP,CAAtB,CAlDoB,CA4DpB;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA,sBACE,uDACA,oBAAC,SAAD;AACI,IAAA,SAAS,EAAEE,SADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAKA,oBAAC,UAAD;AACI,IAAA,KAAK,EAAEtB,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALA,eAUE,oBAAC,GAAD;AACE,IAAA,SAAS,EAAC,KADZ;AAEE,IAAA,MAAM,EAAEN,MAFV;AAGE,IAAA,IAAI,EAAE,GAHR,CAIE;AAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQGI,IAAI,CAACyB,MAAL,GAAc,CAAd,IACCzB,IAAI,CAAC0B,GAAL,CAAUC,CAAD,IAAO;AACd,UAAMC,YAAY,GAAG;AAAE9B,MAAAA,GAAG,EAAE6B,CAAC,CAACE,QAAT;AAAmB9B,MAAAA,GAAG,EAAE4B,CAAC,CAACG;AAA1B,KAArB;;AAGA,UAAMC,cAAc,GAAG,MAAM;AAC3BC,MAAAA,YAAY,CAACL,CAAD,CAAZ;AACH,KAFC;;AAIA,wBACI,oBAAC,MAAD;AAAQ,MAAA,QAAQ,EAAEC,YAAlB;AAAgC,MAAA,IAAI,EAAEb,QAAtC;AAAgD,MAAA,OAAO,EAAEgB,cAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAYJ,CAAC,CAACM,EAAd,CAFF,CADJ;AAMD,GAdD,CATJ,EAyBGC,UAAU,CAACT,MAAX,GAAoB,CAApB,IACCS,UAAU,CAACR,GAAX,CAAgBC,CAAD,IAAO;AACpB,UAAMC,YAAY,GAAG;AAAE9B,MAAAA,GAAG,EAAE6B,CAAC,CAACE,QAAT;AAAmB9B,MAAAA,GAAG,EAAE4B,CAAC,CAACG;AAA1B,KAArB;;AAEA,UAAMK,MAAM,GAAG,MAAM;AACnBhC,MAAAA,QAAQ,CAACwB,CAAD,CAAR,CADmB,CAEjB;AACA;AACH,KAJD;;AAMA,wBACM,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAEC,YADZ;AAEE,MAAA,IAAI,EAAEL,aAFR;AAGE,MAAA,OAAO,EAAEY,MAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBALF,eAME,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAYR,CAAC,CAACM,EAAd,CANF,CADN;AAUD,GAnBD,CA1BJ,eA+CE,oBAAC,SAAD;AACE,IAAA,WAAW,EAAC,2EADd;AAEE,IAAA,GAAG,EAAC,oDAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA/CF,CAVF,CADF;AAmED;;AAED,eAAevC,KAAf","sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\nimport { Map, TileLayer, Popup, Marker } from \"react-leaflet\";\nimport localizador from \"../assets/marcador.png\";\nimport semaforo from \"../assets/semaforo.png\";\nimport L from \"leaflet\";\nimport axios from \"axios\";\nimport Acidentes from \"../Pages/Acidentes\";\nimport Controlers from \"../Pages/Controlers\";\nimport Header from \"./Header\";\nimport { handleIncident } from \"../requests/user\";\n\n\nfunction MyMap(props) {\n  const [center, setCenter] = useState({ lat: -20.30297, lng: -40.303538 });\n  const [data, setData] = useState([]);\n  // const [controlers, setControlers] = useState([]);\n  // const [incidents, setIncidents] = useState([])\n  const [teste, setTeste] = useState()\n\n  // const handleIncident = async () => {\n  //   axios\n  //     .get(\"https://dev.atmansystems.com/attlas-public/api/Incidents\")\n  //     .then((res) => {\n  //       // alert(\"ok\");\n  //       setData(res.data);\n  //     })\n  //     .catch((error) => {\n  //       alert(\"deu erro\");\n  //       console.log(error.response);\n  //     });\n  // };\n\n  const handleControlers = async () => {\n    axios\n      .get(\"https://dev.atmansystems.com/attlas-public/api/Controllers\")\n      .then((res) => {\n        alert(\"ok\");\n        setControlers(res.data);\n      })\n      .catch((error) => {\n        alert(\"deu erro\");\n        console.log(error.response);\n      });\n  };\n\n  useEffect(() => {\n    handleIncident(setData);\n    handleControlers(setControlers);\n  }, []);\n\n  console.log(\"DADOS\", data);\n\n  const marcador = L.icon({\n    iconUrl: localizador,\n    // shadowUrl: leafShadow,\n    iconSize: [50, 50], // size of the icon\n    shadowSize: [50, 64], // size of the shadow\n    iconAnchor: [22, 94], // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62], // the same for the shadow\n    popupAnchor: [-3, -76],\n  });\n\n  const controladores = L.icon({\n    iconUrl: semaforo,\n    // shadowUrl: leafShadow,\n    iconSize: [50, 50], // size of the icon\n    shadowSize: [50, 64], // size of the shadow\n    iconAnchor: [22, 94], // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62], // the same for the shadow\n    popupAnchor: [-3, -76],\n  });\n\n  //   const teste = {lat: data[0].latitude, lng: data[0].longitude}\n\n  // const clicou = (event) => {\n  //   // setTeste(event.target.value.name);\n  //   console.log(event.value)\n  //   // console.log(teste);\n  // }\n  // console.log(teste)\n\n\n  return (\n    <>\n    <Acidentes\n        incidents={incidents}\n    />\n    \n    <Controlers\n        teste={teste}\n    />\n    \n    \n      <Map\n        className=\"map\"\n        center={center}\n        zoom={100}\n        // style={{ height: 500, width: \"100%\" }}\n      >\n      \n      \n        {data.length > 0 &&\n          data.map((p) => {\n            const positionMark = { lat: p.latitude, lng: p.longitude }\n            \n            \n            const DatasIncidents = () => {\n              setIncidents(p)\n          }\n            \n            return (\n                <Marker position={positionMark} icon={marcador} onclick={DatasIncidents}>\n                  <Popup>INCIDIDENTES</Popup>\n                  <Popup>ID: {p.id}</Popup>\n                </Marker>\n            );\n          })}\n\n        {controlers.length > 0 &&\n          controlers.map((p) => {\n            const positionMark = { lat: p.latitude, lng: p.longitude };\n\n            const clicou = () => {\n              setTeste(p)\n                // console.log('oi')\n                // console.log(teste)\n            }\n\n            return (\n                  <Marker\n                    position={positionMark}\n                    icon={controladores}\n                    onClick={clicou}\n                  >\n                    <Popup>CONTROLADORES</Popup>\n                    <Popup>ID: {p.id}</Popup>\n                  </Marker>\n            );\n          })}\n\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n      </Map>\n\n      \n    </>\n  );\n}\n\nexport default MyMap;\n"]},"metadata":{},"sourceType":"module"}