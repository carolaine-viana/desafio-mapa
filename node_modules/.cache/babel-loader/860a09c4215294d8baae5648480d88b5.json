{"ast":null,"code":"var _jsxFileName = \"/Users/carolaine.viana/Documents/react-leaflet-tutorial/src/Components/MyMap.js\";\nimport React, { Component, useEffect, useState } from \"react\";\nimport { Map, TileLayer, Popup, Marker } from \"react-leaflet\";\nimport green from \"../assets/leaf-green.png\";\nimport leafGreen from \"../assets/leaf-green.png\";\nimport leafRed from \"../assets/leaf-red.png\";\nimport leafOrange from \"../assets/leaf-orange.png\";\nimport leafShadow from \"../assets/leaf-shadow.png\";\nimport localizador from '../assets/marcador.png';\nimport L from \"leaflet\";\nimport axios from \"axios\";\n\nfunction MyMap() {\n  const [center, setCenter] = useState({\n    lat: -20.30297,\n    lng: -40.303538\n  }); //   const [teste, setteste] = useState({ lat: -20.3021, lng: -40.30356 });\n\n  const [data, setData] = useState([]);\n\n  const handleIncident = async () => {\n    // axios\n    //   .get(\"https://dev.atmansystems.com/attlas-public/api/Incidents\")\n    //   .then((res) => {\n    //     // alert(\"ok\");\n    //     setData(res.data);\n    //   })\n    //   .catch((error) => {\n    //     alert(\"deu erro\");\n    //     console.log('ERRO MENSAGEM', error.response);\n    //   })\n    try {\n      const response = await axios.get(\"https://dev.atmansystems.com/attlas-public/api/Controllers\");\n      setData(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    handleIncident();\n  }, []);\n  console.log('DADOS', data);\n  const grenIcon = L.icon({\n    iconUrl: localizador,\n    // shadowUrl: leafShadow,\n    iconSize: [50, 50],\n    // size of the icon\n    shadowSize: [50, 64],\n    // size of the shadow\n    iconAnchor: [22, 94],\n    // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62],\n    // the same for the shadow\n    popupAnchor: [-3, -76]\n  });\n  const positionIcon = [data.latitude, data.longitude];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Map, {\n    className: \"map\",\n    center: center,\n    zoom: 30 // style={{ height: 500, width: \"100%\" }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, data && data.map(p => {\n    var _p$latitude, _p$longitude;\n\n    return /*#__PURE__*/React.createElement(Marker, {\n      position: ((_p$latitude = p.latitude) !== null && _p$latitude !== void 0 ? _p$latitude : center.lat, (_p$longitude = p.longitude) !== null && _p$longitude !== void 0 ? _p$longitude : center.lng),\n      icon: grenIcon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, \"Estou aqui\"));\n  }), /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default MyMap;","map":{"version":3,"sources":["/Users/carolaine.viana/Documents/react-leaflet-tutorial/src/Components/MyMap.js"],"names":["React","Component","useEffect","useState","Map","TileLayer","Popup","Marker","green","leafGreen","leafRed","leafOrange","leafShadow","localizador","L","axios","MyMap","center","setCenter","lat","lng","data","setData","handleIncident","response","get","error","console","log","grenIcon","icon","iconUrl","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","positionIcon","latitude","longitude","map","p"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\nimport { Map, TileLayer, Popup, Marker } from \"react-leaflet\";\nimport green from \"../assets/leaf-green.png\";\nimport leafGreen from \"../assets/leaf-green.png\";\nimport leafRed from \"../assets/leaf-red.png\";\nimport leafOrange from \"../assets/leaf-orange.png\";\nimport leafShadow from \"../assets/leaf-shadow.png\";\nimport localizador from '../assets/marcador.png';\nimport L from \"leaflet\";\nimport axios from \"axios\";\n\n\nfunction MyMap() {\n  const [center, setCenter] = useState({ lat: -20.30297, lng: -40.303538 });\n//   const [teste, setteste] = useState({ lat: -20.3021, lng: -40.30356 });\n  const [data, setData] = useState([]);\n\n  const handleIncident = async() => {\n    // axios\n    //   .get(\"https://dev.atmansystems.com/attlas-public/api/Incidents\")\n    //   .then((res) => {\n    //     // alert(\"ok\");\n    //     setData(res.data);\n    //   })\n    //   .catch((error) => {\n    //     alert(\"deu erro\");\n    //     console.log('ERRO MENSAGEM', error.response);\n    //   })\n    try{\n        const response = await axios.get(\"https://dev.atmansystems.com/attlas-public/api/Controllers\")\n        setData(response.data)\n    }\n    catch(error){\n        console.log(error)\n    }\n  };\n  \n  useEffect(() => {\n    handleIncident();\n  }, []);\n\n    console.log('DADOS', data)\n\n  const grenIcon = L.icon({\n    iconUrl: localizador,\n    // shadowUrl: leafShadow,\n    iconSize: [50, 50], // size of the icon\n    shadowSize: [50, 64], // size of the shadow\n    iconAnchor: [22, 94], // point of the icon which will correspond to marker's location\n    shadowAnchor: [4, 62], // the same for the shadow\n    popupAnchor: [-3, -76],\n  });\n\n  const positionIcon = [data.latitude, data.longitude];\n\n  return (\n    <div>\n      <Map\n        className=\"map\"\n        center={center}\n        zoom={30}\n        // style={{ height: 500, width: \"100%\" }}\n      >\n      \n      {data && data.map((p) => {\n          return (\n            <Marker position={p.latitude ?? center.lat, p.longitude ?? center.lng} icon={grenIcon}>\n              <Popup>Estou aqui</Popup>\n            </Marker>\n          );\n        })}\n      \n        {/* <Marker position={positionIcon} icon={grenIcon}>\n          <Popup>Estou aqui</Popup>\n          \n        </Marker> */}\n\n        {/* <Marker position={teste}>\n          <Popup>teste 2</Popup>\n        </Marker> */}\n        \n\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n      </Map>\n    </div>\n  );\n}\n\nexport default MyMap;\n"]},"metadata":{},"sourceType":"module"}